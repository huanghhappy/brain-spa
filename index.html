<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <title>è§£å£“æ²»ç™‚æ‰€ Brain SPA</title>
    <meta name="description" content="çµ¦å¤§è…¦åšå€‹SPAå§ï¼10å€‹ç™‚ç™’äº’å‹•å°éŠæˆ²ï¼Œé‡‹æ”¾ä½ çš„æ—¥å¸¸å£“åŠ›ã€‚">
    <meta property="og:title" content="è§£å£“æ²»ç™‚æ‰€ Brain SPA">
    <meta property="og:description" content="çµ¦å¤§è…¦åšå€‹SPAå§ï¼10å€‹ç™‚ç™’äº’å‹•å°éŠæˆ²ï¼Œé‡‹æ”¾ä½ çš„æ—¥å¸¸å£“åŠ›ã€‚">
    <meta property="og:image" content="social.png">
    <link rel="apple-touch-icon" href="logo.png">
    <link rel="icon" href="logo.png">

    <style>
        /* åŒ¯å…¥æœ¬åœ°çš„æºæ³‰åœ“é«” TW */
        @font-face {
            font-family: 'GenSenRounded2TW';
            src: url('500.otf') format('opentype');
            font-weight: 500;
        }
        @font-face {
            font-family: 'GenSenRounded2TW';
            src: url('700.otf') format('opentype');
            font-weight: 700;
        }
        @font-face {
            font-family: 'GenSenRounded2TW';
            src: url('900.otf') format('opentype');
            font-weight: 900;
        }

        :root {
            --bg-color: #FDF6E3;
            --primary: #FFB3BA;
            --secondary: #BAE1FF;
            --text-color: #555555;
            --card-bg: #FFFFFF;
        }

        * {
            box-sizing: border-box;
            font-family: 'GenSenRounded2TW', 'Noto Sans TC', sans-serif;
            margin: 0;
            padding: 0;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            /* ä½¿ç”¨ dvh è§£æ±ºæ‰‹æ©Ÿç€è¦½å™¨å·¥å…·åˆ—é®æ“‹å°è‡´çš„æ»¾å‹•å•é¡Œ */
            min-height: 100vh; 
            min-height: 100dvh; 
            padding: 2.5vh 15px 1.5vh 15px; /* ä¸Šä¸‹é‚Šè·æ”¹ç”¨ vh å‹•æ…‹æ¯”ä¾‹ */
            justify-content: space-between; /* ç¢ºä¿å…§å®¹èˆ‡é å°¾æ’é–‹ */
            overflow: hidden; /* é˜²æ­¢ä»»ä½•æ„å¤–çš„å–®é æ»¾å‹• */
        }

        #main-screen-container {
            flex: 1; 
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start; /* è®“å…§å®¹åä¸Šï¼Œç¶­æŒè¦–è¦ºé‡å¿ƒ */
            padding-top: 1vh; 
            width: 100%;
            max-width: 500px;
        }

        #main-screen {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        h1 {
            font-size: 24px;
            font-weight: 900;
            margin-bottom: 2.5vh; /* å‹•æ…‹é–“è· */
            color: #333;
            text-align: center;
        }

        /* æ»‘æ¡¿å€å¡Šæ¨£å¼ */
        .severity-selector {
            background: var(--card-bg);
            padding: 15px; 
            border-radius: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            margin-bottom: 3vh; /* å‹•æ…‹é–“è· */
            text-align: center;
            width: 100%;
        }

        .severity-selector p {
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 12px;
            text-align: center;
        }

        /* è‡ªè¨‚æ»‘æ¡¿è»Œé“èˆ‡ Emoji åœ“é» */
        input[type=range] {
            -webkit-appearance: none;
            width: 100%;
            height: 12px;
            border-radius: 6px;
            background: #eee;
            outline: none;
            margin: 10px 0;
        }
        
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 36px;
            height: 36px;
            cursor: pointer;
            background: var(--thumb-img) center/contain no-repeat;
            background-color: transparent;
            border: none;
            box-shadow: none;
            transform: translateY(-2px);
        }

        /* 5è¡Œ 2åˆ— ç·Šæ¹Šç¶²æ ¼è¨­å®š */
        .game-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px; /* ç¨å¾®ç¸®å°é–“éš™ï¼Œç•™ç©ºé–“çµ¦æŒ‰éˆ•é«˜åº¦ */
            width: 100%;
        }

        .game-btn {
            background-color: var(--card-bg);
            border: none;
            border-radius: 12px;
            /* ä½¿ç”¨ clamp é™åˆ¶æŒ‰éˆ•é«˜åº¦ï¼Œæœ€å°ä¸ä½æ–¼ 12pxï¼Œæœ€å¤§ä¸è¶…é 18pxï¼Œä¸­é–“è·Ÿéš¨è¢å¹•é«˜åº¦ç¸®æ”¾ */
            padding: clamp(12px, 2vh, 18px) 5px; 
            font-size: 14px; /* ç¨å¾®ç¸®å°å­—é«”ç¢ºä¿ä¸æ›è¡Œ */
            font-weight: 700;
            color: var(--text-color);
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            transition: transform 0.1s, box-shadow 0.1s;
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            gap: 6px;
            white-space: nowrap;
        }

        .game-btn:active {
            transform: scale(0.95);
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .game-btn .icon {
            font-size: 18px;
        }

        footer {
            margin-top: auto; /* å°‡é å°¾æ¨åˆ°æœ€åº• */
            font-size: 11px;
            font-weight: 500;
            color: #aaaaaa;
            text-align: center;
        }

        /* éŠæˆ²ç•«é¢æ¨£å¼ */
        #game-screen {
            display: none;
            flex: 1;
            flex-direction: column;
            align-items: center;
            width: 100%;
            max-width: 500px;
            justify-content: center;
            position: relative;
        }

        .back-btn {
            position: absolute;
            top: 0;
            left: 0;
            background: var(--primary);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(255, 179, 186, 0.4);
            z-index: 10;
        }

        .game-container {
            width: 100%;
            flex: 1; /* è®“éŠæˆ²å®¹å™¨å¡«æ»¿å‰©é¤˜é«˜åº¦ */
            max-height: 70vh; /* é™åˆ¶æœ€å¤§é«˜åº¦é¿å…ç ´ç‰ˆ */
            display: flex;
            justify-content: center;
            align-items: center;
            background: var(--card-bg);
            border-radius: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            overflow: hidden;
            position: relative;
            margin-top: 45px; /* ç•™ä½å­çµ¦è¿”å›æŒ‰éˆ• */
            margin-bottom: 20px;
        }

        /* éŠæˆ²ä¸€ï¼šæ­ªåœ–æ‰¶æ­£ */
        #frame-img { width: 180px; transition: transform 0.1s ease-out; cursor: grab; }
        #frame-img.perfect { transform: rotate(0deg) !important; transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); pointer-events: none; }
        
        /* éŠæˆ²äºŒï¼šæ³¡æ³¡ç´™ */
        .bubble-wrap { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; padding: 20px; }
        .bubble { width: 45px; height: 45px; background: radial-gradient(circle at 30% 30%, #ffffff, #BAE1FF); border-radius: 50%; box-shadow: inset 0 -2px 5px rgba(0,0,0,0.1), 0 2px 5px rgba(0,0,0,0.1); cursor: pointer; transition: all 0.1s; }
        .bubble.popped { background: #e0f0ff; box-shadow: inset 0 2px 5px rgba(0,0,0,0.1); transform: scale(0.95); }

    </style>
</head>
<body>

    <div id="main-screen-container">
        <div id="main-screen">
            <h1>ğŸ§  è§£å£“æ²»ç™‚æ‰€ Brain SPA âœ¨</h1>
            
            <div class="severity-selector">
                <p>è«‹é¸æ“‡ä½ ç›®å‰çš„å¼·è¿«ç—‡ç™¼ä½œæŒ‡æ•¸</p>
                <input type="range" id="severity-slider" min="0" max="10" value="5">
                <div style="display: flex; justify-content: space-between; font-size: 11px; font-weight: 500; color: #aaa; margin-top: 5px;">
                    <span>å¾®ç„¦æ…®</span>
                    <span>å¿«çˆ†ç‚¸</span>
                </div>
            </div>

            <div class="game-grid">
                <button class="game-btn" onclick="startGame('align')"><span class="icon">ğŸ–¼ï¸</span> æ­ªåœ–æ‰¶æ­£</button>
                <button class="game-btn" onclick="startGame('bubble')"><span class="icon">ğŸ«§</span> æ“ æ³¡æ³¡ç´™</button>
                <button class="game-btn" onclick="alert('é–‹ç™¼ä¸­ï¼')"><span class="icon">ğŸ–ï¸</span> é‰›ç­†å‰Šå¹³</button>
                <button class="game-btn" onclick="alert('é–‹ç™¼ä¸­ï¼')"><span class="icon">ğŸŒˆ</span> é¡è‰²æ’åº</button>
                <button class="game-btn" onclick="alert('é–‹ç™¼ä¸­ï¼')"><span class="icon">ğŸ“¦</span> è²“å’ªæ­¸ä½</button>
                <button class="game-btn" onclick="alert('é–‹ç™¼ä¸­ï¼')"><span class="icon">ğŸ©¹</span> æ’•é™¤æ¨™ç±¤</button>
                <button class="game-btn" onclick="alert('é–‹ç™¼ä¸­ï¼')"><span class="icon">ğŸ§¹</span> æ¡Œå¸ƒé™¤å¡µ</button>
                <button class="game-btn" onclick="alert('é–‹ç™¼ä¸­ï¼')"><span class="icon">ğŸ’¥</span> æ“ ç—˜ç—˜</button>
                <button class="game-btn" onclick="alert('é–‹ç™¼ä¸­ï¼')"><span class="icon">ğŸª†</span> ä¿„ç¾…æ–¯å¥—å¨ƒ</button>
                <button class="game-btn" onclick="alert('é–‹ç™¼ä¸­ï¼')"><span class="icon">ğŸ“„</span> ç¢ç´™æ©Ÿ</button>
            </div>
        </div>
    </div>

    <div id="game-screen">
        <button class="back-btn" onclick="showMainScreen()">ğŸ”™ è¿”å›</button>
        <div class="game-container" id="game-content"></div>
    </div>

    <footer>
        Â© 2026 an App a Day Project.
    </footer>

    <script>
        const mainScreenContainer = document.getElementById('main-screen-container');
        const gameScreen = document.getElementById('game-screen');
        const gameContent = document.getElementById('game-content');
        const footer = document.querySelector('footer');
        
        // 11 å€‹éšæ®µçš„ Emoji (å°æ‡‰ 0 åˆ° 10 åˆ†)
        const emojis = ['ğŸ«£', 'ğŸ˜–', 'ğŸ«¨', 'ğŸ˜µâ€ğŸ’«', 'ğŸ« ', 'ğŸ¥¶', 'ğŸ¤¢', 'ğŸ¤®', 'ğŸ˜µ', 'ğŸ¤¯', 'ğŸ’¥'];
        const slider = document.getElementById('severity-slider');

        // å‹•æ…‹æ›´æ–°æ»‘æ¡¿ Emoji
        function updateSliderEmoji() {
            const index = parseInt(slider.value); 
            const currentEmoji = emojis[index];
            const svg = `<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40"><text x="50%" y="50%" dominant-baseline="central" text-anchor="middle" font-size="30">${currentEmoji}</text></svg>`;
            slider.style.setProperty('--thumb-img', `url('data:image/svg+xml;utf8,${encodeURIComponent(svg)}')`);
        }

        slider.addEventListener('input', updateSliderEmoji);
        updateSliderEmoji();

        function startGame(gameId) {
            mainScreenContainer.style.display = 'none';
            gameScreen.style.display = 'flex';
            footer.style.display = 'none';
            gameContent.innerHTML = ''; 

            if (gameId === 'align') initAlignGame();
            else if (gameId === 'bubble') initBubbleGame();
        }

        function showMainScreen() {
            gameScreen.style.display = 'none';
            mainScreenContainer.style.display = 'flex';
            footer.style.display = 'block';
        }

        function initAlignGame() {
            let currentAngle = (Math.random() * 30 + 15) * (Math.random() > 0.5 ? 1 : -1);
            gameContent.innerHTML = `
                <div style="text-align: center;">
                    <p style="margin-bottom: 20px; font-weight:700; color: var(--text-color);">æ‹–æ›³åœ–ç‰‡ï¼ŒæŠŠå®ƒè½‰æ­£å§ï¼</p>
                    <img id="frame-img" src="frame.png" alt="ç›¸æ¡†" style="transform: rotate(${currentAngle}deg);" draggable="false">
                </div>
            `;
            const img = document.getElementById('frame-img');
            let isDragging = false, startX;

            img.onerror = function() {
                this.outerHTML = `<div id="frame-img" style="width: 180px; height: 135px; background: #FFD1DC; border: 10px solid #FFF; box-shadow: 0 4px 10px rgba(0,0,0,0.1); transform: rotate(${currentAngle}deg); display: flex; justify-content: center; align-items: center; font-size: 40px; border-radius: 10px;">ğŸŒ¸</div>`;
                attachDragEvents(document.getElementById('frame-img'));
            };

            function attachDragEvents(element) {
                element.addEventListener('pointerdown', (e) => {
                    isDragging = true; startX = e.clientX; element.style.cursor = 'grabbing';
                });
                window.addEventListener('pointermove', (e) => {
                    if (!isDragging) return;
                    const dx = e.clientX - startX;
                    currentAngle += dx * 0.2; 
                    startX = e.clientX;
                    element.style.transform = `rotate(${currentAngle}deg)`;
                    if (Math.abs(currentAngle) < 3) {
                        isDragging = false; element.classList.add('perfect');
                        setTimeout(() => alert('âœ¨ å®Œç¾å°é½Šï¼å¥½èˆ’æš¢ï¼'), 400);
                    }
                });
                window.addEventListener('pointerup', () => { isDragging = false; element.style.cursor = 'grab'; });
            }
            attachDragEvents(img);
        }

        function initBubbleGame() {
            let html = `<div class="bubble-wrap">`;
            for(let i=0; i<20; i++) { html += `<div class="bubble" onclick="popBubble(this)"></div>`; }
            html += `</div>`;
            gameContent.innerHTML = `
                <div style="text-align: center;">
                    <p style="margin-bottom: 20px; font-weight:700; color: var(--text-color);">ç›¡æƒ…æçˆ†å®ƒå€‘å§ï¼</p>
                    ${html}
                    <button onclick="startGame('bubble')" style="margin-top:20px; padding:10px 20px; border-radius:15px; border:none; background:var(--primary); color:white; font-weight:700; cursor:pointer;">ğŸ”„ æ›ä¸€å¼µæ–°æ³¡æ³¡ç´™</button>
                </div>
            `;
        }
        
        function popBubble(element) {
            if (!element.classList.contains('popped')) element.classList.add('popped');
        }
    </script>
</body>
</html>
